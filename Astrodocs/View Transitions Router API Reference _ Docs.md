- Start
- Guides and recipes
- Reference
- Integrations
- Third-party services
- Getting started
- Welcome, world!
								
							
							
	



						
						
	
				
						Why Astro?
						
					
			
				
						Islands architecture
						
					
			
				
						Tutorial: Build a blog
						
					
			
				
						Courses
- Why Astro?
- Islands architecture
- Tutorial: Build a blog
- Courses
- Start a new project
								
							
							
	



						
						
	
				
						Installation
						
					
			
				
						Project structure
						
					
			
				
						Develop and build
- Installation
- Project structure
- Develop and build
- Configuration
								
							
							
	



						
						
	
				
						Configuration overview
						
					
			
				
						Editor setup
						
					
			
				
						TypeScript
						
					
			
				
						Environment variables
						
					
			
				
						Build with AI
						
					
			
				
						Dev toolbar
- Configuration overview
- Editor setup
- TypeScript
- Environment variables
- Build with AI
- Dev toolbar
- Migrate to Astro
								
							
							
	



						
						
	
				
						Site migration overview
						
					
			
				
						Create React App
						
					
			
				
						Docusaurus
						
					
			
				
						Eleventy
						
					
			
				
						Gatsby
						
					
			
				
						GitBook
						
					
			
				
						Gridsome
						
					
			
				
						Hugo
						
					
			
				
						Jekyll
						
					
			
				
						Next.js
						
					
			
				
						NuxtJS
						
					
			
				
						Pelican
						
					
			
				
						SvelteKit
						
					
			
				
						VuePress
						
					
			
				
						WordPress
- Site migration overview
- Create React App
- Docusaurus
- Eleventy
- Gatsby
- GitBook
- Gridsome
- Hugo
- Jekyll
- Next.js
- NuxtJS
- Pelican
- SvelteKit
- VuePress
- WordPress
- Routing and navigation
								
							
							
	



						
						
	
				
						Pages
						
					
			
				
						Routing
						
					
			
				
						Endpoints
						
					
			
				
						Middleware
						
					
			
				
						Internationalization (i18n)
						
					
			
				
						Prefetch
						
					
			
				
						View transitions
- Pages
- Routing
- Endpoints
- Middleware
- Internationalization (i18n)
- Prefetch
- View transitions
- Build your UI
								
							
							
	



						
						
	
				
						Components
						
					
			
				
						Layouts
						
					
			
				
						Styles and CSS
						
					
			
				
						Fonts
						
					
			
				
						Syntax Highlighting
						
					
			
				
						Scripts and event handling
						
					
			
				
						Front-end frameworks
- Components
- Layouts
- Styles and CSS
- Fonts
- Syntax Highlighting
- Scripts and event handling
- Front-end frameworks
- Add content to your site
								
							
							
	



						
						
	
				
						Markdown
						
					
			
				
						Content collections
						
					
			
				
						Images
						
					
			
				
						Data fetching
						
					
			
				
						Astro DB
- Markdown
- Content collections
- Images
- Data fetching
- Astro DB
- Server rendering
								
							
							
	



						
						
	
				
						On-demand rendering
						
					
			
				
						Server islands
						
					
			
				
						Actions
						
					
			
				
						Sessions
- On-demand rendering
- Server islands
- Actions
- Sessions
- Upgrade
								
							
							
	



						
						
	
				
						Upgrade Astro
						
					
			
				
						
						
							
								Major upgrade guides
								
							
							
	



						
						
	
				
						v5.0
						
					
			
				
						v4.0
						
					
			
				
						v3.0
						
					
			
				
						v2.0
						
					
			
				
						v1.0
- Upgrade Astro
- Major upgrade guides
								
							
							
	



						
						
	
				
						v5.0
						
					
			
				
						v4.0
						
					
			
				
						v3.0
						
					
			
				
						v2.0
						
					
			
				
						v1.0
- v5.0
- v4.0
- v3.0
- v2.0
- v1.0
- Troubleshooting
- How-to recipes
								
							
							
	



						
						
	
				
						Recipes overview
						
					
			
				
						Installing a Vite or Rollup plugin
						
					
			
				
						Analyze bundle size
						
					
			
				
						Build a custom image component
						
					
			
				
						Build HTML forms in Astro pages
						
					
			
				
						Build forms with API routes
						
					
			
				
						Use Bun with Astro
						
					
			
				
						Call endpoints from the server
						
					
			
				
						Verify a Captcha
						
					
			
				
						Customize file names in the build output
						
					
			
				
						Build your Astro site with Docker
						
					
			
				
						Dynamically import images
						
					
			
				
						Add icons to external links
						
					
			
				
						Add i18n features
						
					
			
				
						Create a dev toolbar app
						
					
			
				
						Add last modified time
						
					
			
				
						Add reading time
						
					
			
				
						Add an RSS feed
						
					
			
				
						Share state between Astro components
						
					
			
				
						Share state between islands
						
					
			
				
						Using streaming to improve page performance
						
					
			
				
						Style rendered Markdown with Tailwind Typography
- Recipes overview
- Installing a Vite or Rollup plugin
- Analyze bundle size
- Build a custom image component
- Build HTML forms in Astro pages
- Build forms with API routes
- Use Bun with Astro
- Call endpoints from the server
- Verify a Captcha
- Customize file names in the build output
- Build your Astro site with Docker
- Dynamically import images
- Add icons to external links
- Add i18n features
- Create a dev toolbar app
- Add last modified time
- Add reading time
- Add an RSS feed
- Share state between Astro components
- Share state between islands
- Using streaming to improve page performance
- Style rendered Markdown with Tailwind Typography
- Contribute to Astro
- Astro Template Syntax
- Configuration Reference
- CLI Commands
- Imports reference
- Routing Reference
- Runtime API
Render context
astro:actions
astro:assets
astro:config
astro:content
astro:env
astro:i18n
astro:middleware
astro:transitions
- Render context
- astro:actions
- astro:assets
- astro:config
- astro:content
- astro:env
- astro:i18n
- astro:middleware
- astro:transitions
- Other development APIs
Integration API
Adapter API
Content Loader API
Image Service API
Dev Toolbar App API
Container API (experimental)
Programmatic Astro API (experimental)
- Integration API
- Adapter API
- Content Loader API
- Image Service API
- Dev Toolbar App API
- Container API (experimental)
- Programmatic Astro API (experimental)
- Experimental features
Configuring experimental flags
Content Security Policy
Fonts
Live content collections
Client prerendering
Intellisense for collections
Preserve scripts order
Markdown heading ID compatibility
Private meta environment variables inlining
Chrome DevTools workspace
Prerender conflict error
SVG optimization
- Configuring experimental flags
- Content Security Policy
- Fonts
- Live content collections
- Client prerendering
- Intellisense for collections
- Preserve scripts order
- Markdown heading ID compatibility
- Private meta environment variables inlining
- Chrome DevTools workspace
- Prerender conflict error
- SVG optimization
- Legacy flags
- Error reference
- Integrations overview
- UI frameworks
								
							
							
	



						
						
	
				
						Alpine.js
						
					
			
				
						Preact
						
					
			
				
						React
						
					
			
				
						SolidJS
						
					
			
				
						Svelte
						
					
			
				
						Vue
- Alpine.js
- Preact
- React
- SolidJS
- Svelte
- Vue
- Adapters
								
							
							
	



						
						
	
				
						Cloudflare
						
					
			
				
						Netlify
						
					
			
				
						Node
						
					
			
				
						Vercel
- Cloudflare
- Netlify
- Node
- Vercel
- Other official integrations
								
							
							
	



						
						
	
				
						DB
						
					
			
				
						Markdoc
						
					
			
				
						MDX
						
					
			
				
						Partytown
						
					
			
				
						Sitemap
- DB
- Markdoc
- MDX
- Partytown
- Sitemap
- Publish to npm
- Deployment guides
								
							
							
	



						
						
	
				
						Deployment overview
						
					
			
				
						AWS
						
					
			
				
						AWS via Flightcontrol
						
					
			
				
						AWS via SST
						
					
			
				
						Azion
						
					
			
				
						Buddy
						
					
			
				
						Cleavr
						
					
			
				
						Clever Cloud
						
					
			
				
						Cloudflare
						
					
			
				
						CloudRay
						
					
			
				
						Deno Deploy
						
					
			
				
						DeployHQ
						
					
			
				
						Firebase
						
					
			
				
						Fleek
						
					
			
				
						Fly.io
						
					
			
				
						GitHub Pages
						
					
			
				
						GitLab Pages
						
					
			
				
						Google Cloud
						
					
			
				
						Heroku
						
					
			
				
						Juno
						
					
			
				
						Kinsta
						
					
			
				
						Microsoft Azure
						
					
			
				
						Netlify
						
					
			
				
						Railway
						
					
			
				
						Render
						
					
			
				
						Seenode
						
					
			
				
						Stormkit
						
					
			
				
						Surge
						
					
			
				
						Vercel
						
					
			
				
						Zeabur
						
					
			
				
						Zephyr Cloud
						
					
			
				
						Zerops
- Deployment overview
- AWS
- AWS via Flightcontrol
- AWS via SST
- Azion
- Buddy
- Cleavr
- Clever Cloud
- Cloudflare
- CloudRay
- Deno Deploy
- DeployHQ
- Firebase
- Fleek
- Fly.io
- GitHub Pages
- GitLab Pages
- Google Cloud
- Heroku
- Juno
- Kinsta
- Microsoft Azure
- Netlify
- Railway
- Render
- Seenode
- Stormkit
- Surge
- Vercel
- Zeabur
- Zephyr Cloud
- Zerops
- Content management systems
								
							
							
	



						
						
	
				
						CMS overview
						
					
			
				
						ApostropheCMS
						
					
			
				
						Builder.io
						
					
			
				
						ButterCMS
						
					
			
				
						Caisy
						
					
			
				
						CloudCannon
						
					
			
				
						Contentful
						
					
			
				
						Cosmic
						
					
			
				
						Craft CMS
						
					
			
				
						Craft Cross CMS
						
					
			
				
						Crystallize
						
					
			
				
						DatoCMS
						
					
			
				
						Decap CMS
						
					
			
				
						Directus
						
					
			
				
						Drupal
						
					
			
				
						Flotiq
						
					
			
				
						Front Matter CMS
						
					
			
				
						Ghost
						
					
			
				
						GitCMS
						
					
			
				
						Hashnode
						
					
			
				
						Hygraph
						
					
			
				
						JekyllPad
						
					
			
				
						Keystatic
						
					
			
				
						KeystoneJS
						
					
			
				
						Kontent.ai
						
					
			
				
						microCMS
						
					
			
				
						Optimizely CMS
						
					
			
				
						Payload CMS
						
					
			
				
						Prepr CMS
						
					
			
				
						Prismic
						
					
			
				
						Sanity
						
					
			
				
						Sitecore XM
						
					
			
				
						Sitepins
						
					
			
				
						Spinal
						
					
			
				
						Statamic
						
					
			
				
						Storyblok
						
					
			
				
						Strapi
						
					
			
				
						StudioCMS
						
					
			
				
						Tina CMS
						
					
			
				
						Umbraco
						
					
			
				
						Wordpress
- CMS overview
- ApostropheCMS
- Builder.io
- ButterCMS
- Caisy
- CloudCannon
- Contentful
- Cosmic
- Craft CMS
- Craft Cross CMS
- Crystallize
- DatoCMS
- Decap CMS
- Directus
- Drupal
- Flotiq
- Front Matter CMS
- Ghost
- GitCMS
- Hashnode
- Hygraph
- JekyllPad
- Keystatic
- KeystoneJS
- Kontent.ai
- microCMS
- Optimizely CMS
- Payload CMS
- Prepr CMS
- Prismic
- Sanity
- Sitecore XM
- Sitepins
- Spinal
- Statamic
- Storyblok
- Strapi
- StudioCMS
- Tina CMS
- Umbraco
- Wordpress
- Backend services
								
							
							
	



						
						
	
				
						Backend services overview
						
					
			
				
						Appwrite
						
					
			
				
						Firebase
						
					
			
				
						Neon
						
					
			
				
						Prisma Postgres
						
					
			
				
						Sentry
						
					
			
				
						Supabase
						
					
			
				
						Turso
						
					
			
				
						Xata
- Backend services overview
- Appwrite
- Firebase
- Neon
- Prisma Postgres
- Sentry
- Supabase
- Turso
- Xata
- Image and video hosting
								
							
							
	



						
						
	
				
						Media hosting overview
						
					
			
				
						Cloudinary
						
					
			
				
						Mux
- Media hosting overview
- Cloudinary
- Mux
- E-commerce
- Authentication
- Testing
## Sponsored by

## Sponsored by

- Overview
- Imports from astro:transitions
				
				
	
				
					<ClientRouter />
				
				
			
				
					fade
				
				
			
				
					slide
- <ClientRouter />
- fade
- slide
- Imports from astro:transitions/client
				
				
	
				
					navigate()
				
				
	
				
					history option
				
				
			
				
					formData option
				
				
			
				
					info option
				
				
			
				
					state option
				
				
			
				
					sourceElement option
				
				
			

			
				
					supportsViewTransitions
				
				
			
				
					transitionEnabledOnThisPage()
				
				
			
				
					getFallback()
				
				
			
				
					swapFunctions
				
				
	
				
					deselectScripts()
				
				
			
				
					swapRootAttributes()
				
				
			
				
					swapHeadElements()
				
				
			
				
					saveFocus()
				
				
			
				
					swapBodyElement()
				
				
			

			
				
					Deprecated imports
- navigate()
				
				
	
				
					history option
				
				
			
				
					formData option
				
				
			
				
					info option
				
				
			
				
					state option
				
				
			
				
					sourceElement option
- history option
- formData option
- info option
- state option
- sourceElement option
- supportsViewTransitions
- transitionEnabledOnThisPage()
- getFallback()
- swapFunctions
				
				
	
				
					deselectScripts()
				
				
			
				
					swapRootAttributes()
				
				
			
				
					swapHeadElements()
				
				
			
				
					saveFocus()
				
				
			
				
					swapBodyElement()
- deselectScripts()
- swapRootAttributes()
- swapHeadElements()
- saveFocus()
- swapBodyElement()
- Deprecated imports
- astro:transitions/client types
				
				
	
				
					Direction
				
				
			
				
					Fallback
				
				
			
				
					NavigationTypeString
				
				
			
				
					TransitionBeforePreparationEvent
				
				
			
				
					TransitionBeforeSwapEvent
- Direction
- Fallback
- NavigationTypeString
- TransitionBeforePreparationEvent
- TransitionBeforeSwapEvent
- Lifecycle events
				
				
	
				
					astro:before-preparation event
				
				
			
				
					astro:after-preparation event
				
				
			
				
					astro:before-swap event
				
				
			
				
					astro:after-swap event
				
				
			
				
					astro:page-load event
				
				
			
				
					Lifecycle events attributes
				
				
	
				
					info
				
				
			
				
					sourceElement
				
				
			
				
					newDocument
				
				
			
				
					navigationType
				
				
			
				
					direction
				
				
			
				
					from
				
				
			
				
					to
				
				
			
				
					formData
				
				
			
				
					loader()
				
				
			
				
					viewTransition
				
				
			
				
					swap()
- astro:before-preparation event
- astro:after-preparation event
- astro:before-swap event
- astro:after-swap event
- astro:page-load event
- Lifecycle events attributes
				
				
	
				
					info
				
				
			
				
					sourceElement
				
				
			
				
					newDocument
				
				
			
				
					navigationType
				
				
			
				
					direction
				
				
			
				
					from
				
				
			
				
					to
				
				
			
				
					formData
				
				
			
				
					loader()
				
				
			
				
					viewTransition
				
				
			
				
					swap()
- info
- sourceElement
- newDocument
- navigationType
- direction
- from
- to
- formData
- loader()
- viewTransition
- swap()
## On this page

- Overview
- Imports from astro:transitions
<ClientRouter />
fade
slide
- <ClientRouter />
- fade
- slide
- Imports from astro:transitions/client
navigate()
history option
formData option
info option
state option
sourceElement option
supportsViewTransitions
transitionEnabledOnThisPage()
getFallback()
swapFunctions
deselectScripts()
swapRootAttributes()
swapHeadElements()
saveFocus()
swapBodyElement()
Deprecated imports
- navigate()
history option
formData option
info option
state option
sourceElement option
- history option
- formData option
- info option
- state option
- sourceElement option
- supportsViewTransitions
- transitionEnabledOnThisPage()
- getFallback()
- swapFunctions
deselectScripts()
swapRootAttributes()
swapHeadElements()
saveFocus()
swapBodyElement()
- deselectScripts()
- swapRootAttributes()
- swapHeadElements()
- saveFocus()
- swapBodyElement()
- Deprecated imports
- astro:transitions/client types
Direction
Fallback
NavigationTypeString
TransitionBeforePreparationEvent
TransitionBeforeSwapEvent
- Direction
- Fallback
- NavigationTypeString
- TransitionBeforePreparationEvent
- TransitionBeforeSwapEvent
- Lifecycle events
astro:before-preparation event
astro:after-preparation event
astro:before-swap event
astro:after-swap event
astro:page-load event
Lifecycle events attributes
info
sourceElement
newDocument
navigationType
direction
from
to
formData
loader()
viewTransition
swap()
- astro:before-preparation event
- astro:after-preparation event
- astro:before-swap event
- astro:after-swap event
- astro:page-load event
- Lifecycle events attributes
info
sourceElement
newDocument
navigationType
direction
from
to
formData
loader()
viewTransition
swap()
- info
- sourceElement
- newDocument
- navigationType
- direction
- from
- to
- formData
- loader()
- viewTransition
- swap()
## Learn Astro with James Q Quick

Build your first site with 35 interactive Scrimba lessons

# View Transitions Router API Reference

Added in: astro@3.0.0

```
astro@3.0.0
```

These modules provide functions to control and interact with the View Transitions API and client-side router.

Note

This API is compatible with the <ClientRouter /> included in astro:transitions, but can’t be used with native browser MPA routing.

```
<ClientRouter />
```

```
astro:transitions
```

For features and usage examples, see our View Transitions guide.

## Imports from astro:transitions

```
astro:transitions
```

```
import {
  ClientRouter,
  fade,
  slide,
} from 'astro:transitions';
```

```
import {
  ClientRouter,
  fade,
  slide,
} from 'astro:transitions';
```

### <ClientRouter />

```
<ClientRouter />
```

Added in: astro@5.0.0

```
astro@5.0.0
```

Opt in to using view transitions on individual pages by importing and adding the <ClientRouter /> routing component to <head> on every desired page.

```
<ClientRouter />
```

```
<head>
```

```
---
import { ClientRouter } from 'astro:transitions';
---
<html lang="en">
  <head>
    <title>My Homepage</title>
    <ClientRouter />
  </head>
  <body>
    <h1>Welcome to my website!</h1>
  </body>
</html>
```

```
---
import { ClientRouter } from 'astro:transitions';
---
<html lang="en">
  <head>
    <title>My Homepage</title>
    <ClientRouter />
  </head>
  <body>
    <h1>Welcome to my website!</h1>
  </body>
</html>
```

See more about how to control the router and add transition directives to page elements and components.

The <ClientRouter /> component accepts the following props:

```
<ClientRouter />
```

#### fallback

```
fallback
```

Type: Fallback
Default: animate

```
Fallback
```

```
animate
```

Defines the fallback strategy to use for browsers that do not support the View Transitions API.

### fade

```
fade
```

Type: (opts: { duration?: string | number }) => TransitionDirectionalAnimations

```
(opts: { duration?: string | number }) => TransitionDirectionalAnimations
```

```
astro@3.0.0
```

Utility function to support customizing the duration of the built-in fade animation.

```
fade
```

```
---
import { fade } from 'astro:transitions';
---


<!-- Fade transition with the default duration -->
<div transition:animate="fade" />


<!-- Fade transition with a duration of 400 milliseconds -->
<div transition:animate={fade({ duration: '0.4s' })} />
```

```
---
import { fade } from 'astro:transitions';
---


<!-- Fade transition with the default duration -->
<div transition:animate="fade" />


<!-- Fade transition with a duration of 400 milliseconds -->
<div transition:animate={fade({ duration: '0.4s' })} />
```

### slide

```
slide
```

Type: (opts: { duration?: string | number }) => TransitionDirectionalAnimations

```
(opts: { duration?: string | number }) => TransitionDirectionalAnimations
```

```
astro@3.0.0
```

Utility function to support customizing the duration of the built-in slide animation.

```
slide
```

```
---
import { slide } from 'astro:transitions';
---


<!-- Slide transition with the default duration -->
<div transition:animate="slide" />


<!-- Slide transition with a duration of 400 milliseconds -->
<div transition:animate={slide({ duration: '0.4s' })} />
```

```
---
import { slide } from 'astro:transitions';
---


<!-- Slide transition with the default duration -->
<div transition:animate="slide" />


<!-- Slide transition with a duration of 400 milliseconds -->
<div transition:animate={slide({ duration: '0.4s' })} />
```

## Imports from astro:transitions/client

```
astro:transitions/client
```

```
import {
  getFallback,
  navigate,
  supportsViewTransitions,
  swapFunctions,
  transitionEnabledOnThisPage,
  /* The following are scheduled for deprecation in v6: */
  isTransitionBeforePreparationEvent,
  isTransitionBeforeSwapEvent,
  TRANSITION_AFTER_PREPARATION,
  TRANSITION_AFTER_SWAP,
  TRANSITION_BEFORE_PREPARATION,
  TRANSITION_BEFORE_SWAP,
  TRANSITION_PAGE_LOAD,
} from 'astro:transitions/client';
```

```
import {
  getFallback,
  navigate,
  supportsViewTransitions,
  swapFunctions,
  transitionEnabledOnThisPage,
  /* The following are scheduled for deprecation in v6: */
  isTransitionBeforePreparationEvent,
  isTransitionBeforeSwapEvent,
  TRANSITION_AFTER_PREPARATION,
  TRANSITION_AFTER_SWAP,
  TRANSITION_BEFORE_PREPARATION,
  TRANSITION_BEFORE_SWAP,
  TRANSITION_PAGE_LOAD,
} from 'astro:transitions/client';
```

### navigate()

```
navigate()
```

Type: (href: string, options?: Options) => void

```
(href: string, options?: Options) => void
```

```
astro@3.2.0
```

Executes a navigation to the given href using the View Transitions API.

```
href
```

This function signature is based on the navigate function from the browser Navigation API. Although based on the Navigation API, this function is implemented on top of the History API to allow for navigation without reloading the page.

```
navigate
```

navigate() does not perform sanitization on the href parameter. Sanitize user input if you use it to determine the URL to navigate to.

```
navigate()
```

```
href
```

#### history option

```
history
```

Type: 'auto' | 'push' | 'replace'
Default: 'auto'

```
'auto' | 'push' | 'replace'
```

```
'auto'
```

```
astro@3.2.0
```

Defines how this navigation should be added to the browser history.

- 'push': the router will use history.pushState to create a new entry in the browser history.
```
'push'
```

```
history.pushState
```

- 'replace': the router will use history.replaceState to update the URL without adding a new entry into navigation.
```
'replace'
```

```
history.replaceState
```

- 'auto' (default): the router will attempt history.pushState, but if the URL cannot be transitioned to, the current URL will remain with no changes to the browser history.
```
'auto'
```

```
history.pushState
```

This option follows the history option from the browser Navigation API but simplified for the cases that can happen on an Astro project.

```
history
```

#### formData option

```
formData
```

Type: FormData

```
FormData
```

```
astro@3.5.0
```

A FormData object for POST requests.

```
FormData
```

```
POST
```

When this option is provided, the requests to the navigation target page will be sent as a POST request with the form data object as the content.

```
POST
```

Submitting an HTML form with view transitions enabled will use this method instead of the default navigation with page reload. Calling this method allows triggering the same behavior programmatically.

#### info option

```
info
```

Type: any

```
any
```

```
astro@3.6.0
```

Arbitrary data to be included in the astro:before-preparation and astro:before-swap events caused by this navigation.

```
astro:before-preparation
```

```
astro:before-swap
```

This option mimics the info option from the browser Navigation API.

```
info
```

#### state option

```
state
```

Type: any

```
any
```

```
astro@3.6.0
```

Arbitrary data to be associated with the NavigationHistoryEntry object created by this navigation. This data can then be retrieved using the history.getState function from the History API.

```
NavigationHistoryEntry
```

```
history.getState
```

This option mimics the state option from the browser Navigation API.

```
state
```

#### sourceElement option

```
sourceElement
```

Type: Element

```
Element
```

```
astro@3.6.0
```

The element that triggered this navigation, if any. This element will be available in the following events:

- astro:before-preparation
```
astro:before-preparation
```

- astro:before-swap
```
astro:before-swap
```

### supportsViewTransitions

```
supportsViewTransitions
```

Type: boolean

```
boolean
```

```
astro@3.2.0
```

Whether or not view transitions are supported and enabled in the current browser.

### transitionEnabledOnThisPage()

```
transitionEnabledOnThisPage()
```

Type: () => boolean

```
() => boolean
```

```
astro@3.2.0
```

Whether or not the current page has view transitions enabled for client-side navigation. This can be used to make components that behave differently when they are used on pages with view transitions.

### getFallback()

```
getFallback()
```

Type: () => Fallback
Default: animate

```
() => Fallback
```

```
animate
```

```
astro@3.6.0
```

Returns the fallback strategy to use (animate by default) in browsers that do not support view transitions.

```
animate
```

### swapFunctions

```
swapFunctions
```

Type: object

```
object
```

```
astro@4.15.0
```

An object containing the utility functions used to build Astro’s default swap function. These can be useful when building a custom swap function.

swapFunctions provides the following methods:

```
swapFunctions
```

#### deselectScripts()

```
deselectScripts()
```

Type: (newDocument: Document) => void

```
(newDocument: Document) => void
```

Marks scripts in the new document that should not be executed. Those scripts are already in the current document and are not flagged for re-execution using data-astro-rerun.

```
data-astro-rerun
```

#### swapRootAttributes()

```
swapRootAttributes()
```

Type: (newDocument: Document) => void

```
(newDocument: Document) => void
```

Swaps the attributes between the document roots, like the lang attribute. This also includes Astro-injected internal attributes like data-astro-transition, which makes the transition direction available to Astro-generated CSS rules.

```
lang
```

```
data-astro-transition
```

When making a custom swap function, it is important to call this function so as not to break the view transition’s animations.

#### swapHeadElements()

```
swapHeadElements()
```

Type: (newDocument: Document) => void

```
(newDocument: Document) => void
```

Removes every element from the current document’s <head> that is not persisted to the new document. Then appends all new elements from the new document’s <head> to the current document’s <head>.

```
<head>
```

```
<head>
```

```
<head>
```

#### saveFocus()

```
saveFocus()
```

Type: () => () => void

```
() => () => void
```

Stores the element in focus on the current page and returns a function that when called, if the focused element was persisted, returns the focus to it.

#### swapBodyElement()

```
swapBodyElement()
```

Type: (newBody: Element, oldBody: Element) => void

```
(newBody: Element, oldBody: Element) => void
```

Replaces the old body with the new body. Then, goes through every element in the old body that should be persisted and have a matching element in the new body and swaps the old element back in place.

### Deprecated imports

The following imports are scheduled for deprecation in v6. You can still use them in your project, but you may prefer to update your code now.

#### isTransitionBeforePreparationEvent()

```
isTransitionBeforePreparationEvent()
```

Type: (value: any) => boolean

```
(value: any) => boolean
```

```
astro@3.6.0
```

Scheduled for deprecation

This function is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

Determines whether the given value matches a TransitionBeforePreparationEvent. This can be useful when you need to narrow the type of an event in an event listener.

```
TransitionBeforePreparationEvent
```

```
---
---


<script>
  import {
    isTransitionBeforePreparationEvent,
    TRANSITION_BEFORE_PREPARATION,
  } from "astro:transitions/client";


  function listener(event: Event) {
    const setting = isTransitionBeforePreparationEvent(event) ? 1 : 2;
    /* do something with setting */
  }


  document.addEventListener(TRANSITION_BEFORE_PREPARATION, listener);
</script>
```

```
---
---


<script>
  import {
    isTransitionBeforePreparationEvent,
    TRANSITION_BEFORE_PREPARATION,
  } from "astro:transitions/client";


  function listener(event: Event) {
    const setting = isTransitionBeforePreparationEvent(event) ? 1 : 2;
    /* do something with setting */
  }


  document.addEventListener(TRANSITION_BEFORE_PREPARATION, listener);
</script>
```

#### isTransitionBeforeSwapEvent()

```
isTransitionBeforeSwapEvent()
```

Type: (value: any) => boolean

```
(value: any) => boolean
```

```
astro@3.6.0
```

Scheduled for deprecation

This function is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

Determines whether the given value matches a TransitionBeforeSwapEvent. This can be useful when you need to narrow the type of an event in an event listener.

```
TransitionBeforeSwapEvent
```

```
---
---


<script>
  import {
    isTransitionBeforeSwapEvent,
    TRANSITION_BEFORE_SWAP,
  } from "astro:transitions/client";


  function listener(event: Event) {
    const setting = isTransitionBeforeSwapEvent(event) ? 1 : 2;
    /* do something with setting */
  }


  document.addEventListener(TRANSITION_BEFORE_SWAP, listener);
</script>
```

```
---
---


<script>
  import {
    isTransitionBeforeSwapEvent,
    TRANSITION_BEFORE_SWAP,
  } from "astro:transitions/client";


  function listener(event: Event) {
    const setting = isTransitionBeforeSwapEvent(event) ? 1 : 2;
    /* do something with setting */
  }


  document.addEventListener(TRANSITION_BEFORE_SWAP, listener);
</script>
```

#### TRANSITION_BEFORE_PREPARATION

```
TRANSITION_BEFORE_PREPARATION
```

Type: 'astro:before-preparation'

```
'astro:before-preparation'
```

```
astro@3.6.0
```

Scheduled for deprecation

This constant is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

A constant to avoid writing the astro:before-preparation event name in plain text when you define an event.

```
astro:before-preparation
```

```
---
---


<script>
  import { TRANSITION_BEFORE_PREPARATION } from "astro:transitions/client";


  document.addEventListener(TRANSITION_BEFORE_PREPARATION, () => {
    /* the listener logic */
  });
</script>
```

```
---
---


<script>
  import { TRANSITION_BEFORE_PREPARATION } from "astro:transitions/client";


  document.addEventListener(TRANSITION_BEFORE_PREPARATION, () => {
    /* the listener logic */
  });
</script>
```

#### TRANSITION_AFTER_PREPARATION

```
TRANSITION_AFTER_PREPARATION
```

Type: 'astro:after-preparation'

```
'astro:after-preparation'
```

```
astro@3.6.0
```

Scheduled for deprecation

This constant is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

A constant to avoid writing the astro:after-preparation event name in plain text when you define an event.

```
astro:after-preparation
```

```
---
---


<script>
  import { TRANSITION_AFTER_PREPARATION } from "astro:transitions/client";


  document.addEventListener(TRANSITION_AFTER_PREPARATION, () => {
    /* the listener logic */
  });
</script>
```

```
---
---


<script>
  import { TRANSITION_AFTER_PREPARATION } from "astro:transitions/client";


  document.addEventListener(TRANSITION_AFTER_PREPARATION, () => {
    /* the listener logic */
  });
</script>
```

#### TRANSITION_BEFORE_SWAP

```
TRANSITION_BEFORE_SWAP
```

Type: 'astro:before-swap'

```
'astro:before-swap'
```

```
astro@3.6.0
```

Scheduled for deprecation

This constant is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

A constant to avoid writing the astro:before-swap event name in plain text when you define an event.

```
astro:before-swap
```

```
---
---


<script>
  import { TRANSITION_BEFORE_SWAP } from "astro:transitions/client";


  document.addEventListener(TRANSITION_BEFORE_SWAP, () => {
    /* the listener logic */
  });
</script>
```

```
---
---


<script>
  import { TRANSITION_BEFORE_SWAP } from "astro:transitions/client";


  document.addEventListener(TRANSITION_BEFORE_SWAP, () => {
    /* the listener logic */
  });
</script>
```

#### TRANSITION_AFTER_SWAP

```
TRANSITION_AFTER_SWAP
```

Type: 'astro:after-swap'

```
'astro:after-swap'
```

```
astro@3.6.0
```

Scheduled for deprecation

This constant is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

A constant to avoid writing the astro:after-swap event name in plain text when you define an event.

```
astro:after-swap
```

```
---
---


<script>
  import { TRANSITION_AFTER_SWAP } from "astro:transitions/client";


  document.addEventListener(TRANSITION_AFTER_SWAP, () => {
    /* the listener logic */
  });
</script>
```

```
---
---


<script>
  import { TRANSITION_AFTER_SWAP } from "astro:transitions/client";


  document.addEventListener(TRANSITION_AFTER_SWAP, () => {
    /* the listener logic */
  });
</script>
```

#### TRANSITION_PAGE_LOAD

```
TRANSITION_PAGE_LOAD
```

Type: 'astro:page-load'

```
'astro:page-load'
```

```
astro@3.6.0
```

Scheduled for deprecation

This constant is scheduled for deprecation in v6. You can still use it in your project, but you may prefer to update your code now.

A constant to avoid writing the astro:page-load event name in plain text when you define an event.

```
astro:page-load
```

```
---
---


<script>
  import { TRANSITION_PAGE_LOAD } from "astro:transitions/client";


  document.addEventListener(TRANSITION_PAGE_LOAD, () => {
    /* the listener logic */
  });
</script>
```

```
---
---


<script>
  import { TRANSITION_PAGE_LOAD } from "astro:transitions/client";


  document.addEventListener(TRANSITION_PAGE_LOAD, () => {
    /* the listener logic */
  });
</script>
```

## astro:transitions/client types

```
astro:transitions/client
```

```
import type {
  Direction,
  Fallback,
  NavigationTypeString,
  Options,
  TransitionBeforePreparationEvent,
  TransitionBeforeSwapEvent,
} from 'astro:transitions/client';
```

```
import type {
  Direction,
  Fallback,
  NavigationTypeString,
  Options,
  TransitionBeforePreparationEvent,
  TransitionBeforeSwapEvent,
} from 'astro:transitions/client';
```

### Direction

```
Direction
```

Type: 'forward' | 'back'

```
'forward' | 'back'
```

```
astro@3.2.0
```

A union of animation directions:

- forward: navigating to the next page in the history or to a new page.
```
forward
```

- back: navigating to the previous page in the history.
```
back
```

### Fallback

```
Fallback
```

Type: 'none' | 'animate' | 'swap'

```
'none' | 'animate' | 'swap'
```

```
astro@3.2.0
```

A union of fallback strategies to use in browsers that do not support view transitions:

- animate: Astro will simulate view transitions using custom attributes before updating page content.
```
animate
```

- swap: Astro will not attempt to animate the page. Instead, the old page will be immediately replaced by the new one.
```
swap
```

- none: Astro will not do any animated page transitions at all. Instead, you will get full page navigation in non-supporting browsers.
```
none
```

```
ClientRouter
```

### NavigationTypeString

```
NavigationTypeString
```

Type: 'push' | 'replace' | 'traverse'

```
'push' | 'replace' | 'traverse'
```

```
astro@3.6.0
```

A union of supported history navigation events.

### TransitionBeforePreparationEvent

```
TransitionBeforePreparationEvent
```

Type: Event

```
Event
```

```
astro@3.6.0
```

Represents an astro:before-preparation event. This can be useful to type the event received by a listener:

```
astro:before-preparation
```

```
---
---


<script>
  import {
    TRANSITION_BEFORE_PREPARATION,
    type TransitionBeforePreparationEvent
  } from "astro:transitions/client";


  function listener(event: TransitionBeforePreparationEvent) {
    /* do something */
  }


  document.addEventListener(TRANSITION_BEFORE_PREPARATION, listener);
</script>
```

```
---
---


<script>
  import {
    TRANSITION_BEFORE_PREPARATION,
    type TransitionBeforePreparationEvent
  } from "astro:transitions/client";


  function listener(event: TransitionBeforePreparationEvent) {
    /* do something */
  }


  document.addEventListener(TRANSITION_BEFORE_PREPARATION, listener);
</script>
```

### TransitionBeforeSwapEvent

```
TransitionBeforeSwapEvent
```

Type: Event

```
Event
```

```
astro@3.6.0
```

Represents an astro:before-swap event. This can be useful to type the event received by a listener:

```
astro:before-swap
```

```
---
---


<script>
  import {
    TRANSITION_BEFORE_SWAP,
    type TransitionBeforeSwapEvent
  } from "astro:transitions/client";


  function listener(event: TransitionBeforeSwapEvent) {
    /* do something */
  }


  document.addEventListener(TRANSITION_BEFORE_SWAP, listener);
</script>
```

```
---
---


<script>
  import {
    TRANSITION_BEFORE_SWAP,
    type TransitionBeforeSwapEvent
  } from "astro:transitions/client";


  function listener(event: TransitionBeforeSwapEvent) {
    /* do something */
  }


  document.addEventListener(TRANSITION_BEFORE_SWAP, listener);
</script>
```

## Lifecycle events

### astro:before-preparation event

```
astro:before-preparation
```

Type: TransitionBeforePreparationEvent

```
TransitionBeforePreparationEvent
```

```
astro@3.6.0
```

An event dispatched at the beginning of a navigation using the View Transitions router. This event happens before any request is made and any browser state is changed.

This event has the attributes:

- info
```
info
```

- sourceElement
```
sourceElement
```

- navigationType
```
navigationType
```

- direction
```
direction
```

- from
```
from
```

- to
```
to
```

- formData
```
formData
```

- loader()
```
loader()
```

### astro:after-preparation event

```
astro:after-preparation
```

Type: Event

```
Event
```

```
astro@3.6.0
```

An event dispatched after the next page in a navigation using View Transitions router is loaded.

This event has no attributes.

### astro:before-swap event

```
astro:before-swap
```

Type: TransitionBeforeSwapEvent

```
TransitionBeforeSwapEvent
```

```
astro@3.6.0
```

An event dispatched after the next page is parsed, prepared, and linked into a document in preparation for the transition but before any content is swapped between the documents.

This event can’t be canceled. Calling preventDefault() is a no-op.

```
preventDefault()
```

This event has the attributes:

- info
```
info
```

- sourceElement
```
sourceElement
```

- navigationType
```
navigationType
```

- direction
```
direction
```

- from
```
from
```

- to
```
to
```

- viewTransition
```
viewTransition
```

- swap()
```
swap()
```

### astro:after-swap event

```
astro:after-swap
```

Type: Event

```
Event
```

An event dispatched after the contents of the page have been swapped but before the view transition ends.

The history entry and scroll position have already been updated when this event is triggered.

### astro:page-load event

```
astro:page-load
```

Type: Event

```
Event
```

An event dispatched after a page completes loading, whether from a navigation using view transitions or native to the browser.

When view transitions is enabled on the page, code that would normally execute on DOMContentLoaded should be changed to execute on this event.

```
DOMContentLoaded
```

### Lifecycle events attributes

Added in: astro@3.6.0

```
astro@3.6.0
```

The following attributes are common to both the astro:before-preparation and astro:before-swap events, except for some that are only available with one or the other.

```
astro:before-preparation
```

```
astro:before-swap
```

#### info

```
info
```

Type: any

```
any
```

Arbitrary data defined during navigation.

This is the literal value passed on the info option of the navigate() function.

```
info
```

```
navigate()
```

#### sourceElement

```
sourceElement
```

Type: Element | undefined

```
Element | undefined
```

The element that triggered the navigation. This can be, for example, an <a> element that was clicked.

```
<a>
```

When using the navigate() function, this will be the element specified in the call.

```
navigate()
```

#### newDocument

```
newDocument
```

Type: Document

```
Document
```

The document for the next page in the navigation. The contents of this document will be swapped in place of the contents of the current document.

#### navigationType

```
navigationType
```

Type: NavigationTypeString

```
NavigationTypeString
```

Which kind of history navigation is happening.

- push: a new NavigationHistoryEntry is being created for the new page.
```
push
```

```
NavigationHistoryEntry
```

- replace: the current NavigationHistoryEntry is being replaced with an entry for the new page.
```
replace
```

```
NavigationHistoryEntry
```

- traverse: no NavigationHistoryEntry is created. The position in the history is changing. The direction of the traversal is given on the direction attribute.
```
traverse
```

```
NavigationHistoryEntry
```

```
direction
```

#### direction

```
direction
```

Type: string

```
string
```

The direction of the transition:

- In an astro:before-preparation event, this can be used to define custom directions. The property is writable and accepts any string.
```
astro:before-preparation
```

- In an astro:before-swap event, this can be used to retrieve the transition direction. The property is readonly and its value can be a predefined Direction or any string that an astro:before-preparation event listener might have set.
```
astro:before-swap
```

```
Direction
```

```
astro:before-preparation
```

#### from

```
from
```

Type: URL

```
URL
```

The URL of the page initiating the navigation.

#### to

```
to
```

Type: URL

```
URL
```

The URL of the page being navigated to. This property can be modified, the value at the end of the lifecycle will be used in the NavigationHistoryEntry for the next page.

```
NavigationHistoryEntry
```

#### formData

```
formData
```

Type: FormData | undefined
Available in: astro:before-preparation event

```
FormData | undefined
```

```
astro:before-preparation
```

When set, a POST request will be sent to the to URL with the given FormData object as the content instead of the normal GET request.

```
POST
```

```
to
```

```
FormData
```

```
GET
```

When submitting an HTML form with view transitions enabled, this field is automatically set to the data in the form. When using the navigate() function, this value is the same as given in the options.

```
navigate()
```

#### loader()

```
loader()
```

Type: () => Promise<void>
Available in: astro:before-preparation event

```
() => Promise<void>
```

```
astro:before-preparation
```

Implementation of the following phase in the navigation (loading the next page). This implementation can be overridden to add extra behavior.

#### viewTransition

```
viewTransition
```

Type: ViewTransition
Available in: astro:before-swap event

```
ViewTransition
```

```
astro:before-swap
```

The view transition object used in this navigation. On browsers that do not support the View Transitions API, this is an object implementing the same API for convenience but without the DOM integration.

#### swap()

```
swap()
```

Type: () => void
Available in: astro:before-swap event

```
() => void
```

```
astro:before-swap
```

Calls the default document swap logic. By default, this implementation will call the following functions in order:

- deselectScripts()
```
deselectScripts()
```

- swapRootAttributes()
```
swapRootAttributes()
```

- swapHeadElements()
```
swapHeadElements()
```

- saveFocus()
```
saveFocus()
```

- swapBodyElement()
```
swapBodyElement()
```

## Learn Astro with Coding in Public

150+ video lessons
			
			•
			Astro v5 ready

