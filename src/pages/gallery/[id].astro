---
import GalleryLayout from '@/layouts/Gallery.astro'
import PhotoSwipe from "../../components/PhotoSwipe.astro";

import { getCollection } from "astro:content";
import { getAlbumImages } from '@/lib/data-utils'
import { Image } from "astro:assets";
import Callout from '@/components/Callout.astro'



export async function getStaticPaths() {
    const albums = await getCollection("albums");
  
    const paths = Object.values(albums).map((album) => {
      return {
        params: {id: album.id},
        props: {album}
       
      };
    });
  
    return paths;
  }

  const { album } = Astro.props;
  const images = await getAlbumImages(album.id);
---

<GalleryLayout>
<Callout title="Interacting with images" variant="note">
  Swipe up or down to close the image!
</Callout>

<div class="text-center">

  <section class="col-start-2 mb-4 flex flex-col gap-y-6 text-left">
    <div class="flex flex-col">
      <div class="flex justify-between items-baseline">

        <h1
        class="text-3xl capitalize leading-tight font-medium text-pretty sm:text-5xl"
        >
        {album.data.title} 

      </h1> 
        <p class="mx-2">
        ‚áê
    <a href="/gallery/" class="underline decoration-muted-foreground underline-offset-[3px]"
      > back
      </a>
  </p>
    </div>
        <p class="text-secondary-foreground mt-2">
          {album.data.description}
        </p>
      </div>
      </section>
      <section class="mt-4">
        <PhotoSwipe imageFolder={album.id} />
      </section>

</div>


</GalleryLayout>

